"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2083],{2083:(J,m,s)=>{s.r(m),s.d(m,{Tab2Page:()=>y});var g=s(5861),n=s(1929),u=s(6814),d=s(95),t=s(9212),h=s(6347);function f(i,l){if(1&i&&t._UZ(0,"img",7),2&i){const c=t.oxw();t.Q6J("src","data:image/jpeg;base64,"+c.note.img,t.LSH)}}let C=(()=>{var i;class l{constructor(o,e){this.modalController=e,this.img=!1,this.showImage=!1,this.noteS=o}ngOnInit(){}saveChanges(){return console.log("Estado imagen:"+this.img),this.noteS.updateNote(this.note).then(()=>{this.modalController.dismiss()}).catch(o=>{console.error("Error al actualizar la nota:",o)}),this.img&&(this.note.img=""),console.log(this.note),this.modalController.dismiss(this.note,"confirm")}close(){this.modalController.dismiss()}}return(i=l).\u0275fac=function(o){return new(o||i)(t.Y36(h.Y),t.Y36(n.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-note-modal"]],inputs:{note:"note"},standalone:!0,features:[t.jDz],decls:21,vars:4,consts:[[1,"header-title"],[1,"form-item"],[1,"form-input",3,"ngModel","ngModelChange"],[1,"form-textarea",3,"ngModel","ngModelChange"],["justify","space-between",3,"ngModel","ngModelChange"],["expand","full",1,"form-button",3,"click"],[3,"src",4,"If"],[3,"src"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),t._uU(3,"Edit Note"),t.qZA()()(),t.TgZ(4,"ion-content")(5,"ion-item",1)(6,"ion-label"),t._uU(7,"Title"),t.qZA(),t.TgZ(8,"ion-input",2),t.NdJ("ngModelChange",function(r){return e.note.title=r}),t.qZA()(),t.TgZ(9,"ion-item",1)(10,"ion-label"),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"ion-textarea",3),t.NdJ("ngModelChange",function(r){return e.note.description=r}),t.qZA()(),t.TgZ(13,"ion-item")(14,"ion-checkbox",4),t.NdJ("ngModelChange",function(r){return e.img=r}),t._uU(15,"\xbfQuieres eliminar la im\xe1gen?"),t.qZA()(),t.TgZ(16,"ion-button",5),t.NdJ("click",function(){return e.saveChanges()}),t._uU(17,"Save"),t.qZA(),t.TgZ(18,"ion-button",5),t.NdJ("click",function(){return e.close()}),t._uU(19,"Close"),t.qZA(),t.YNc(20,f,1,1,"img",6),t.qZA()),2&o&&(t.xp6(8),t.Q6J("ngModel",e.note.title),t.xp6(4),t.Q6J("ngModel",e.note.description),t.xp6(2),t.Q6J("ngModel",e.img),t.xp6(6),t.Q6J("If",e.showImage&&e.note.img))},dependencies:[n.Pc,n.YG,n.nz,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.g2,n.wd,n.sr,n.w,n.j9,d.u5,d.JJ,d.On]}),l})();var N=s(5619),M=s(2459),T=s(9397),Z=s(1631),b=s(7398),x=s(9732),p=s(9360);const P=(i,l)=>(i.push(l),i);var _=s(2555);const E=(i,l)=>l.key;function S(i,l){if(1&i){const c=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item-options",2)(2,"ion-item-option",3)(3,"ion-icon",4),t.NdJ("click",function(){const a=t.CHM(c).$implicit,r=t.oxw();return t.KtG(r.editNote(a))}),t.qZA()()(),t.TgZ(4,"ion-item")(5,"ion-thumbnail",5),t._UZ(6,"img",6),t.qZA(),t.TgZ(7,"ion-label"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"ion-item-options",7)(12,"ion-item-option",8)(13,"ion-icon",9),t.NdJ("click",function(){const a=t.CHM(c).$implicit,r=t.oxw();return t.KtG(r.deleteNote(a))}),t.qZA()()()()}if(2&i){const c=l.$implicit;t.xp6(6),t.Q6J("src",c.img,t.LSH),t.xp6(2),t.Oqu(c.title),t.xp6(2),t.Oqu(c.description)}}let y=(()=>{var i;class l{constructor(o,e,a,r){this.platform=o,this.noteS=e,this.modalController=a,this.alertController=r,this._notes$=new N.X([]),this.lastNote=void 0,this.notesPerPage=15,this.isInfiniteScrollAvailable=!0,console.log("CONS")}editNote(o){var e=this;return(0,g.Z)(function*(){e._editNote=o,yield(yield e.modalController.create({component:C,componentProps:{note:o}})).present()})()}deleteNoteSliding(o){this.deleteNote(o)}ionViewDidEnter(){this.platform.ready().then(()=>{console.log(this.platform.height()),this.notesPerPage=Math.round(this.platform.height()/50),this.loadNotes(!0)})}loadNotes(o,e){o?this.noteS.getNotes().subscribe(a=>{this._notes$.next(a),e&&e.target.complete()}):this.lastNote?this.noteS.getMoreNotes(this.lastNote).subscribe(a=>{const r=this._notes$.getValue();this._notes$.next([...r,...a]),e&&e.target.complete()}):(this.isInfiniteScrollAvailable=!1,e&&e.target.complete())}convertPromiseToObservableFromFirebase(o){return(0,M.D)(o).pipe((0,T.b)(e=>{this.lastNote=e.docs&&e.docs.length>=this.notesPerPage?e.docs[e.docs.length-1]:void 0}),(0,Z.z)(e=>e.docs),(0,b.U)(e=>({key:e.id,...e.data()})),function A(){return(0,p.e)((i,l)=>{(function v(i,l){return(0,p.e)((0,x.U)(i,l,arguments.length>=2,!1,!0))})(P,[])(i).subscribe(l)})}())}deleteNote(o){var e=this;return(0,g.Z)(function*(){yield(yield e.alertController.create({header:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar esta nota?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:()=>{e._deleteNote=o,e.noteS&&"function"==typeof e.noteS.deleteNote?e.noteS.deleteNote(o).then(()=>{console.log("Nota eliminada exitosamente")}).catch(r=>{console.error("Error al eliminar la nota:",r)}):console.error("noteS.deleteNote no es una funci\xf3n")}}]})).present()})()}doRefresh(o){this.isInfiniteScrollAvailable=!0,this.loadNotes(!0,o)}loadMore(o){this.loadNotes(!1,o)}}return(i=l).\u0275fac=function(o){return new(o||i)(t.Y36(_.t4),t.Y36(h.Y),t.Y36(n.IN),t.Y36(n.Br))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-tab2"]],standalone:!0,features:[t.jDz],decls:9,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["side","start"],["color","primary"],["slot","start","src","assets/icons/create.svg",2,"zoom","2.5",3,"click"],["slot","start"],[3,"src"],["side","end"],["color","danger","expandable",""],["slot","start","src","assets/icons/trash.svg",2,"zoom","2.5",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3," List Notes "),t.qZA()()(),t.TgZ(4,"ion-content",1)(5,"ion-list"),t.SjG(6,S,14,3,"ion-item-sliding",null,E),t.ALo(8,"async"),t.qZA()()),2&o&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(2),t.wJu(t.lcZ(8,2,e.noteS.notes$)))},dependencies:[n.Pc,n.W2,n.Gu,n.gu,n.Ie,n.u8,n.IK,n.td,n.Q$,n.q_,n.Bs,n.wd,n.sr,u.ez,u.Ov],styles:["ion-header[_ngcontent-%COMP%]{--background: #fff;--color: #333}ion-title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}ion-content[_ngcontent-%COMP%]{--background: #f5f5f5;padding:20px;color:#fff7f7}ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:15px}ion-item[_ngcontent-%COMP%]{margin-bottom:15px}ion-thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}ion-label[_ngcontent-%COMP%]{font-weight:700}p[_ngcontent-%COMP%]{margin-top:5px}"]}),l})()}}]);