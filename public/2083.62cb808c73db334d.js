"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2083],{2083:(S,m,s)=>{s.r(m),s.d(m,{Tab2Page:()=>P});var u=s(5861),n=s(1929),g=s(6814),d=s(95),e=s(9212),h=s(6347);function f(i,l){if(1&i&&e._UZ(0,"img",8),2&i){const a=e.oxw();e.Q6J("src","data:image/jpeg;base64,"+a.note.img,e.LSH)}}let N=(()=>{var i;class l{constructor(o,t){this.modalController=t,this.img=!1,this.showImage=!1,this.noteS=o}ngOnInit(){}saveChanges(){return console.log("Estado imagen:"+this.img),this.noteS.updateNote(this.note).then(()=>{this.modalController.dismiss()}).catch(o=>{console.error("Error al actualizar la nota:",o)}),this.img&&(this.note.img=""),console.log(this.note),this.modalController.dismiss(this.note,"confirm")}close(){this.modalController.dismiss()}}return(i=l).\u0275fac=function(o){return new(o||i)(e.Y36(h.Y),e.Y36(n.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-note-modal"]],inputs:{note:"note"},standalone:!0,features:[e.jDz],decls:23,vars:4,consts:[[1,"header-title"],[1,"form-item"],[1,"form-input",3,"ngModel","ngModelChange"],[1,"form-textarea",3,"ngModel","ngModelChange"],["expand","full",1,"form-button",3,"click"],["justify","space-between",3,"ngModel","ngModelChange"],["expand","block",3,"click"],[3,"src",4,"If"],[3,"src"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3,"Edit Note"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-item",1)(6,"ion-label"),e._uU(7,"Title"),e.qZA(),e.TgZ(8,"ion-input",2),e.NdJ("ngModelChange",function(c){return t.note.title=c}),e.qZA()(),e.TgZ(9,"ion-item",1)(10,"ion-label"),e._uU(11,"Description"),e.qZA(),e.TgZ(12,"ion-textarea",3),e.NdJ("ngModelChange",function(c){return t.note.description=c}),e.qZA()(),e.TgZ(13,"ion-button",4),e.NdJ("click",function(){return t.saveChanges()}),e._uU(14,"Save"),e.qZA(),e.TgZ(15,"ion-button",4),e.NdJ("click",function(){return t.close()}),e._uU(16,"Close"),e.qZA(),e.TgZ(17,"ion-item")(18,"ion-checkbox",5),e.NdJ("ngModelChange",function(c){return t.img=c}),e._uU(19,"\xbfQuieres eliminar la im\xe1gen?"),e.qZA()(),e.TgZ(20,"ion-button",6),e.NdJ("click",function(){return t.showImage=!t.showImage}),e._uU(21,"Ver imagen"),e.qZA(),e.YNc(22,f,1,1,"img",7),e.qZA()),2&o&&(e.xp6(8),e.Q6J("ngModel",t.note.title),e.xp6(4),e.Q6J("ngModel",t.note.description),e.xp6(6),e.Q6J("ngModel",t.img),e.xp6(4),e.Q6J("If",t.showImage&&t.note.img))},dependencies:[n.Pc,n.YG,n.nz,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.g2,n.wd,n.sr,n.w,n.j9,d.u5,d.JJ,d.On]}),l})();var C=s(5619),T=s(2459),Z=s(9397),v=s(1631),M=s(7398),b=s(9732),p=s(9360);const x=(i,l)=>(i.push(l),i);var J=s(2555);const _=(i,l)=>l.key;function y(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-item-options",2)(2,"ion-item-option",3)(3,"ion-icon",4),e.NdJ("click",function(){const r=e.CHM(a).$implicit,c=e.oxw();return e.KtG(c.editNote(r))}),e.qZA()()(),e.TgZ(4,"ion-item")(5,"ion-thumbnail",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"ion-label"),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-item-options",7)(12,"ion-item-option",8)(13,"ion-icon",9),e.NdJ("click",function(){const r=e.CHM(a).$implicit,c=e.oxw();return e.KtG(c.deleteNote(r))}),e.qZA()()()()}if(2&i){const a=l.$implicit;e.xp6(6),e.Q6J("src",a.img,e.LSH),e.xp6(2),e.Oqu(a.title),e.xp6(2),e.Oqu(a.description)}}let P=(()=>{var i;class l{constructor(o,t,r,c){this.platform=o,this.noteS=t,this.modalController=r,this.alertController=c,this._notes$=new C.X([]),this.lastNote=void 0,this.notesPerPage=15,this.isInfiniteScrollAvailable=!0,console.log("CONS")}editNote(o){var t=this;return(0,u.Z)(function*(){t._editNote=o,yield(yield t.modalController.create({component:N,componentProps:{note:o}})).present()})()}deleteNoteSliding(o){this.deleteNote(o)}ionViewDidEnter(){this.platform.ready().then(()=>{console.log(this.platform.height()),this.notesPerPage=Math.round(this.platform.height()/50),this.loadNotes(!0)})}loadNotes(o,t){if(0==o&&null==this.lastNote)return this.isInfiniteScrollAvailable=!1,void t.target.complete()}convertPromiseToObservableFromFirebase(o){return(0,T.D)(o).pipe((0,Z.b)(t=>{this.lastNote=t.docs&&t.docs.length>=this.notesPerPage?t.docs[t.docs.length-1]:void 0}),(0,v.z)(t=>t.docs),(0,M.U)(t=>({key:t.id,...t.data()})),function E(){return(0,p.e)((i,l)=>{(function A(i,l){return(0,p.e)((0,b.U)(i,l,arguments.length>=2,!1,!0))})(x,[])(i).subscribe(l)})}())}deleteNote(o){var t=this;return(0,u.Z)(function*(){yield(yield t.alertController.create({header:"Confirmar eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar esta nota?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:()=>{t._deleteNote=o,t.noteS&&"function"==typeof t.noteS.deleteNote?t.noteS.deleteNote(o).then(()=>{console.log("Nota eliminada exitosamente")}).catch(c=>{console.error("Error al eliminar la nota:",c)}):console.error("noteS.deleteNote no es una funci\xf3n")}}]})).present()})()}doRefresh(o){this.isInfiniteScrollAvailable=!0,this.loadNotes(!0,o)}loadMore(o){this.loadNotes(!1,o)}}return(i=l).\u0275fac=function(o){return new(o||i)(e.Y36(J.t4),e.Y36(h.Y),e.Y36(n.IN),e.Y36(n.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tab2"]],standalone:!0,features:[e.jDz],decls:9,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["side","start"],["color","primary"],["slot","start","src","assets/icons/create.svg",2,"zoom","2.5",3,"click"],["slot","start"],[3,"src"],["side","end"],["color","danger","expandable",""],["slot","start","src","assets/icons/trash.svg",2,"zoom","2.5",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," List Notes "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-list"),e.SjG(6,y,14,3,"ion-item-sliding",null,_),e.ALo(8,"async"),e.qZA()()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(2),e.wJu(e.lcZ(8,2,t.noteS.notes$)))},dependencies:[n.Pc,n.W2,n.Gu,n.gu,n.Ie,n.u8,n.IK,n.td,n.Q$,n.q_,n.Bs,n.wd,n.sr,g.ez,g.Ov]}),l})()}}]);